{"version":3,"sources":["webpack:///./src/app/core/services/file-service/file.service.ts","webpack:///./src/app/modules/document/components/document-list/document-list.component.html","webpack:///./src/app/modules/document/components/document-list/document-list.component.scss","webpack:///./src/app/modules/document/components/document-list/document-list.component.ts","webpack:///./src/app/modules/document/components/progress-modal/progress-modal.component.html","webpack:///./src/app/modules/document/components/progress-modal/progress-modal.component.scss","webpack:///./src/app/modules/document/components/progress-modal/progress-modal.component.ts","webpack:///./src/app/modules/document/document-routing.module.ts","webpack:///./src/app/modules/document/document.module.ts","webpack:///./src/app/shared/models/document.ts"],"names":[],"mappings":"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","file":"src-app-modules-document-document-module.js","sourcesContent":["import {Injectable} from '@angular/core';\r\nimport {HttpClient, HttpEventType, HttpRequest, HttpResponse, HttpHeaders} from '@angular/common/http';\r\nimport * as _ from 'lodash';\r\nimport { Document } from './../../../shared/models/document';\r\nimport { ModalDirective } from 'ng-uikit-pro-standard';\r\nimport { map } from 'rxjs/internal/operators/map';\r\nimport { ReplaySubject } from 'rxjs/internal/ReplaySubject';\r\nimport { Subject } from 'rxjs/internal/Subject';\r\nimport { Observable } from 'rxjs/internal/Observable';\r\nimport * as moment from 'moment';\r\n\r\nconst SERVER_URL = 'https://bfk-portal.herokuapp.com/api/file/';\r\n@Injectable({providedIn: 'root'})\r\nexport class FileService {\r\n\r\n  _progress = new Subject < number > ();\r\n  _allFiles = new ReplaySubject <Array<Document>>();\r\n  constructor(private httpClient: HttpClient) {}\r\n\r\n  getFiles(): Promise<void> {\r\n    return this.httpClient.get(SERVER_URL + 'all').pipe(map((files: any) => {\r\n      console.log(files);\r\n      const copyFiles: Array<Document> = [];\r\n      files.forEach(file => {\r\n        const fileEnd = file.fileName.split('.')[1];\r\n        const newFile = new Document();\r\n        newFile.created = moment(file.created).format('HH:mm DD.MM.YYYY');\r\n        newFile.fileName = file.fileName;\r\n        newFile.group = this.checkFileGroup(fileEnd);\r\n        newFile.id = file.id;\r\n        newFile.lastModified = moment(file.created).format('HH:mm DD.MM.YYYY');\r\n        newFile.ownerId = file.ownerId;\r\n        newFile.path = file.path;\r\n        copyFiles.push(newFile);\r\n      });\r\n      this._allFiles.next(copyFiles);\r\n    })).toPromise();\r\n  }\r\n  downloadFile(id: number): Observable<void> {\r\n    return this.httpClient.get(SERVER_URL + 'download/' + id).pipe(map(response => console.log(response)));\r\n  }\r\n  deleteFile(id: number): Observable<any> {\r\n    return this.httpClient.get(SERVER_URL + 'delete/' + id);\r\n  }\r\n  upload(file: File, progressModal: ModalDirective): void {\r\n    const formData: FormData = new FormData();\r\n    formData.append('uploadFile', file, file.name);\r\n    const headers = new HttpHeaders({ 'enctype': 'multipart/form-data' });\r\n    this\r\n      .httpClient\r\n      .request(new HttpRequest('POST',\r\n       SERVER_URL + 'upload',\r\n       formData,\r\n       {reportProgress: true, headers: headers}))\r\n      .subscribe(event => {\r\n        console.log(event);\r\n        if (event.type === HttpEventType.UploadProgress) {\r\n          const percentDone = Math.round(100 * event.loaded / event.total);\r\n          this\r\n            ._progress\r\n            .next(percentDone);\r\n        } else if (event instanceof HttpResponse) {\r\n          this\r\n            ._progress\r\n            .next(0);\r\n          this\r\n            ._progress\r\n            .complete();\r\n            this.getFiles();\r\n            progressModal.hide();\r\n        }\r\n      });\r\n  }\r\n  groupFiles(files: Array<Document>): Array<Document[]> {\r\n    const partedDocs: Array<Document[]> = [];\r\n    const groupedDocs = _.groupBy(files, (file: Document) => {\r\n      const fileEnd = file.fileName.split('.')[1];\r\n      const group = this.checkFileGroup(fileEnd);\r\n      return group;\r\n\r\n    });\r\n    console.log(groupedDocs);\r\n    for (const key in groupedDocs) {\r\n        if (groupedDocs.hasOwnProperty(key)) {\r\n          const value = groupedDocs[key];\r\n          partedDocs.push(value);\r\n        }\r\n      }\r\n      return partedDocs;\r\n  }\r\n  checkFileGroup(fileEnd: string): string {\r\n      // tslint:disable-next-line:curly\r\n      if (fileEnd === 'docx' || fileEnd === 'doc') return 'Word Dateien';\r\n      // tslint:disable-next-line:curly\r\n      if (fileEnd === 'jpeg' || fileEnd === 'jpg' || fileEnd === 'png') return 'Bild Dateien';\r\n      // tslint:disable-next-line:curly\r\n      if (fileEnd === 'xlsx' || fileEnd === 'csv' || fileEnd === 'xlsm') return 'Excel Dateien';\r\n      // tslint:disable-next-line:curly\r\n      if (fileEnd === 'pptx' || fileEnd === 'ppt') return 'Powerpoint Dateien';\r\n      // tslint:disable-next-line:curly\r\n      if (fileEnd === 'pdf') return 'Pdf Dateien';\r\n      // tslint:disable-next-line:curly\r\n      if ( fileEnd === '7z' || fileEnd === 'zip' || fileEnd === 'rar') return 'Zip Dateien';\r\n      // tslint:disable-next-line:curly\r\n      if ( fileEnd === 'txt' || fileEnd === 'rtf') return 'Text Dateien';\r\n      // tslint:disable-next-line:curly\r\n      if (fileEnd === 'wav' || fileEnd === 'mp3') return 'Audio Dateien';\r\n      // tslint:disable-next-line:curly\r\n      if (fileEnd === 'mpg' || fileEnd === 'avi' || fileEnd === 'mp4') return 'Video Dateien';\r\n      return 'Andere Dateien';\r\n  }\r\n}\r\n","module.exports = \"<div class=\\\"w-100 d-inline-block justify-content-center d-flex\\\">\\r\\n    <button mdbBtn type=\\\"button\\\" placement=\\\"bottom\\\" [mdbPopover]=\\\"popTemplate\\\" size=\\\"sm\\\" class=\\\"btn btn-color float-left waves-light\\\" mdbWavesEffect> \\r\\n      <i class=\\\"fa fa-plus\\\"></i>\\r\\n     </button>\\r\\n</div> \\r\\n<div>\\r\\n  <div *ngFor=\\\"let fileGroup of groupedFiles\\\" >\\r\\n    <h3 class=\\\"h3-responsive font-weight-bold\\\">\\r\\n        <i *ngIf=\\\"fileGroup[0].group === 'Bild Dateien'\\\"  class=\\\"fa fa-file-picture-o\\\"></i>\\r\\n        <i *ngIf=\\\"fileGroup[0].group === 'Word Dateien'\\\"  class=\\\"fa fa-file-word-o\\\"></i>\\r\\n        <i *ngIf=\\\"fileGroup[0].group === 'Excel Dateien'\\\"  class=\\\"fa fa-file-excel-o\\\"></i>\\r\\n        <i *ngIf=\\\"fileGroup[0].group === 'Powerpoint Dateien'\\\"   class=\\\"fa fa-file-powerpoint-o\\\"></i>\\r\\n        <i *ngIf=\\\"fileGroup[0].group === 'Pdf Dateien'\\\"   class=\\\"fa fa-file-pdf-o\\\"></i>\\r\\n        <i *ngIf=\\\"fileGroup[0].group === 'Zip Dateien'\\\"   class=\\\"fa fa-file-zip-o\\\"></i>\\r\\n        <i *ngIf=\\\"fileGroup[0].group === 'Text Dateien'\\\"   class=\\\"fa fa-file-text-o\\\"></i>\\r\\n        <i *ngIf=\\\"fileGroup[0].group === 'Audio Dateien'\\\"   class=\\\"fa fa-file-audio-o\\\"></i>\\r\\n        <i *ngIf=\\\"fileGroup[0].group === 'Video Dateien'\\\"   class=\\\"fa fa-file-video-o\\\"></i>\\r\\n        <i *ngIf=\\\"fileGroup[0].group === 'Andere Dateien'\\\"   class=\\\"fa fa-file\\\"></i>\\r\\n      {{fileGroup[0].group}}\\r\\n    </h3>\\r\\n    <hr class=\\\"hr-dark\\\">\\r\\n  <ul class=\\\"list-group mb-3\\\">\\r\\n    <div *ngFor=\\\"let file of fileGroup\\\" >\\r\\n      <li class=\\\"list-group-item d-flex justify-content-between\\\">\\r\\n        <div class=\\\"d-flex my-auto\\\">{{file.fileName}}</div>\\r\\n        <div class=\\\"d-flex my-auto\\\">{{file.lastModified}}</div>\\r\\n        <div class=\\\"btn-group  float-right\\\" dropdown>\\r\\n            <a dropdownToggle type=\\\"button\\\" class=\\\"dropdown-toggle d-flex waves-light\\\" mdbWavesEffect>\\r\\n                <span class=\\\"fa-stack fa-lg\\\"><i class=\\\"fa fa-circle fa-stack-2x\\\" style=\\\"color: lightgrey;\\\">\\r\\n                  </i><i class=\\\"fa fa-ellipsis-v fa-stack-1x\\\"></i></span>\\r\\n            </a>\\r\\n            \\r\\n            <div class=\\\"dropdown-menu dropdown-menu-right dropdown-primary\\\" role=\\\"menu\\\">\\r\\n              <div (click)=\\\"this.downloadFile(file.id)\\\" class=\\\"dropdown-item\\\">\\r\\n                Download\\r\\n              </div>\\r\\n              <div class=\\\"dropdown-item\\\">\\r\\n                  Löschen\\r\\n                </div>\\r\\n            </div>\\r\\n        </div>\\r\\n      </li>\\r\\n    </div>\\r\\n  </ul>\\r\\n</div>\\r\\n</div>\\r\\n<app-progress-modal (getModalRef)=\\\"getModalRef($event)\\\"></app-progress-modal>\\r\\n<ng-template #popTemplate>\\r\\n    <div class=\\\"file-field md-form\\\">\\r\\n        <div mdbBtn floating=\\\"true\\\" size=\\\"md\\\"  class=\\\"btn-color\\\" mdbWavesEffect>\\r\\n          <i class=\\\"fa fa-cloud-upload\\\" aria-hidden=\\\"true\\\"></i>\\r\\n          <input type=\\\"file\\\" mdbFileSelect (uploadOutput)=\\\"onUploadOutput($event)\\\">\\r\\n        </div>\\r\\n      <div class=\\\"file-path-wrapper mt-3\\\">\\r\\n        <input class=\\\"file-path\\\" type=\\\"text\\\" placeholder=\\\"Dokument\\\" [value]=\\\"showFileName()\\\">\\r\\n      </div>\\r\\n    </div>\\r\\n    <button mdbBtn size=\\\"sm\\\" class=\\\"btn btn-color waves-light \\\" (click)=\\\"uploadFile()\\\" mdbWavesEffect>Starte den Upload</button>\\r\\n  </ng-template>\\r\\n\"","module.exports = \".dropdown-toggle:after {\\n  content: none !important; }\\n\\n.fa-circle {\\n  display: none; }\\n\\nspan:hover .fa-circle {\\n  display: inline-block; }\\n\\nmdb-popover-container {\\n  width: 100%; }\\n\\n.btn-floating {\\n  overflow: unset; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9kb2N1bWVudC9jb21wb25lbnRzL2RvY3VtZW50LWxpc3QvQzpcXFVzZXJzXFxjaHJpc1xcU291cmNlIENvZGVcXEdpdEh1YlxcYmZrLXBvcnRhbFxcYmZrLXBvcnRhbC1jbGllbnQvc3JjXFxhcHBcXG1vZHVsZXNcXGRvY3VtZW50XFxjb21wb25lbnRzXFxkb2N1bWVudC1saXN0XFxkb2N1bWVudC1saXN0LmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0kseUJBQXdCLEVBQzNCOztBQUNEO0VBQ0ksY0FBYSxFQUNoQjs7QUFDRDtFQUVRLHNCQUFxQixFQUN4Qjs7QUFHTDtFQUNJLFlBQVcsRUFDZDs7QUFDRDtFQUNJLGdCQUFlLEVBQ2xCIiwiZmlsZSI6InNyYy9hcHAvbW9kdWxlcy9kb2N1bWVudC9jb21wb25lbnRzL2RvY3VtZW50LWxpc3QvZG9jdW1lbnQtbGlzdC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5kcm9wZG93bi10b2dnbGU6YWZ0ZXJ7XHJcbiAgICBjb250ZW50OiBub25lICFpbXBvcnRhbnQ7XHJcbn1cclxuLmZhLWNpcmNsZXtcclxuICAgIGRpc3BsYXk6IG5vbmU7XHJcbn1cclxuc3Bhbjpob3ZlcntcclxuICAgIC5mYS1jaXJjbGUge1xyXG4gICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgIH1cclxuICAgIFxyXG59XHJcbm1kYi1wb3BvdmVyLWNvbnRhaW5lcntcclxuICAgIHdpZHRoOiAxMDAlO1xyXG59XHJcbi5idG4tZmxvYXRpbmcge1xyXG4gICAgb3ZlcmZsb3c6IHVuc2V0O1xyXG59XHJcbiJdfQ== */\"","import {Component, OnInit, EventEmitter, OnDestroy} from '@angular/core';\r\nimport { FileService } from 'src/app/core/services/file-service/file.service';\r\nimport { NavbarButtonsService } from 'src/app/core/services/navbar-buttons-service/navbar-buttons.service';\r\n\r\nimport { Document } from './../../../../shared/models/document';\r\nimport { UploadFile,\r\n  UploadInput,\r\n  UploadOutput } from 'ng-uikit-pro-standard/ng-uikit-pro-standard/pro/file-input/classes/mdb-uploader.class';\r\nimport { ModalDirective } from 'ng-uikit-pro-standard/ng-uikit-pro-standard/free/modals/modal.directive';\r\nimport { Subscription } from 'rxjs/internal/Subscription';\r\n\r\n@Component({selector: 'app-document-list', templateUrl: './document-list.component.html', styleUrls: ['./document-list.component.scss']})\r\nexport class DocumentListComponent implements OnInit, OnDestroy {\r\n  progress = 0;\r\n  file: UploadFile;\r\n  groupedFiles: Array<Document[]> = [];\r\n  _allFilesSubscription: Subscription;\r\n  _deleteFileSubscription: Subscription;\r\n  public progressModal: ModalDirective;\r\n\r\n  constructor(private fileService: FileService, private navbarButtons: NavbarButtonsService) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.fetchFiles();\r\n    this.navbarButtons.changeToDocuments();\r\n    this._allFilesSubscription = this.fileService._allFiles.subscribe((files: Array<Document>) => {\r\n      console.log(files);\r\n      this.groupedFiles = this.fileService.groupFiles(files);\r\n      console.log(this.groupedFiles);\r\n    });\r\n  }\r\n  fetchFiles() {\r\n    this.fileService.getFiles();\r\n  }\r\n  uploadFile() {\r\n    this.progressModal.show();\r\n    this\r\n      .fileService\r\n      .upload(this.file.nativeFile, this.progressModal);\r\n  }\r\n  downloadFile(id: number) {\r\n    console.log(id);\r\n    this.fileService.downloadFile(id).subscribe();\r\n  }\r\n  deleteFile(id: number) {\r\n    console.log(id);\r\n    this._deleteFileSubscription = this.fileService.deleteFile(id).subscribe(data => {\r\n      this.fetchFiles();\r\n    });\r\n  }\r\n  getModalRef(event: ModalDirective) {\r\n    console.log(event);\r\n    this.progressModal = event;\r\n  }\r\n  onUploadOutput(output: UploadOutput | any): void {\r\n    console.log(output);\r\n    if (output.type === 'addedToQueue') {\r\n      this.file = output.file;\r\n    } // add file to array when added\r\n\r\n  }\r\n  showFileName(): string {\r\n    if (this.file == null) {\r\n      return '';\r\n    } else {\r\n      return this.file.name;\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this._allFilesSubscription.unsubscribe();\r\n    if (this._deleteFileSubscription != null) {\r\n      this._deleteFileSubscription.unsubscribe();\r\n    }\r\n  }\r\n}\r\n","module.exports = \"<div mdbModal #progressModal=\\\"mdbModal\\\" class=\\\"modal fade right\\\" tabindex=\\\"-1\\\" role=\\\"dialog\\\" aria-labelledby=\\\"myBasicModalLabel\\\"\\r\\n  aria-hidden=\\\"true\\\">\\r\\n  <div class=\\\"modal-dialog modal-side modal-sm modal-bottom-right \\\" role=\\\"document\\\">\\r\\n    <div class=\\\"modal-content\\\">\\r\\n      <div class=\\\"modal-header\\\">\\r\\n        <button type=\\\"button\\\" class=\\\"close pull-right\\\" aria-label=\\\"Close\\\" (click)=\\\"progressModal.hide()\\\">\\r\\n          <span aria-hidden=\\\"true\\\">×</span>\\r\\n        </button>\\r\\n      </div>\\r\\n      <div class=\\\"modal-body\\\">\\r\\n        <mdb-progress [value]=\\\"this.progress\\\" min=\\\"0\\\" max=\\\"100\\\" type=\\\"success\\\" aria-valuenow=\\\"'this.progress'\\\" aria-valuemin=\\\"0\\\" aria-valuemax=\\\"100\\\">{{this.progress}}%</mdb-progress>\\r\\n      </div>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\"","module.exports = \".modal .modal-side {\\n  min-width: 300px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvbW9kdWxlcy9kb2N1bWVudC9jb21wb25lbnRzL3Byb2dyZXNzLW1vZGFsL0M6XFxVc2Vyc1xcY2hyaXNcXFNvdXJjZSBDb2RlXFxHaXRIdWJcXGJmay1wb3J0YWxcXGJmay1wb3J0YWwtY2xpZW50L3NyY1xcYXBwXFxtb2R1bGVzXFxkb2N1bWVudFxcY29tcG9uZW50c1xccHJvZ3Jlc3MtbW9kYWxcXHByb2dyZXNzLW1vZGFsLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksaUJBQWdCLEVBQ25CIiwiZmlsZSI6InNyYy9hcHAvbW9kdWxlcy9kb2N1bWVudC9jb21wb25lbnRzL3Byb2dyZXNzLW1vZGFsL3Byb2dyZXNzLW1vZGFsLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1vZGFsIC5tb2RhbC1zaWRlIHtcclxuICAgIG1pbi13aWR0aDogMzAwcHg7XHJcbn0iXX0= */\"","import { Component, OnInit, AfterViewInit, Output, EventEmitter, ViewChild } from '@angular/core';\r\nimport { ModalDirective } from 'ng-uikit-pro-standard';\r\nimport { FileService } from 'src/app/core/services/file-service/file.service';\r\n\r\n@Component({\r\n  selector: 'app-progress-modal',\r\n  templateUrl: './progress-modal.component.html',\r\n  styleUrls: ['./progress-modal.component.scss']\r\n})\r\nexport class ProgressModalComponent implements OnInit, AfterViewInit {\r\n  @Output() getModalRef = new EventEmitter<ModalDirective>();\r\n  @ViewChild('progressModal')public progressModal: ModalDirective;\r\n  progress = 0;\r\n\r\n  constructor(private fileService: FileService) { }\r\n\r\n  ngOnInit() {\r\n    this\r\n      .fileService\r\n      ._progress\r\n      .subscribe(value => {\r\n        console.log(this.progress);\r\n        this.progress = value;\r\n      }, err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n  ngAfterViewInit(): void {\r\n    console.log(this.progressModal);\r\n    this.getModalRef.emit(this.progressModal);\r\n  }\r\n\r\n\r\n}\r\n","import { RouterModule, Routes } from '@angular/router';\r\nimport { DocumentListComponent } from './components/document-list/document-list.component';\r\nimport { NgModule } from '@angular/core';\r\n\r\nconst routes: Routes = [\r\n  {\r\n      path: '',\r\n      component: DocumentListComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n\r\n\r\n  exports: [RouterModule]\r\n})\r\nexport class DocumentRoutingModule {}\r\n","import { NgModule, NO_ERRORS_SCHEMA } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport {MDBSpinningPreloader,\r\n  FileInputModule,\r\n  WavesModule,\r\n  ButtonsModule,\r\n  CollapseModule,\r\n  ModalModule,\r\n  InputsModule,\r\n  DropdownModule,\r\n  PopoverModule} from 'ng-uikit-pro-standard';\r\nimport { DocumentListComponent } from './components/document-list/document-list.component';\r\nimport { DocumentRoutingModule } from './document-routing.module';\r\nimport { ProgressModalComponent } from './components/progress-modal/progress-modal.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    DocumentListComponent,\r\n    ProgressModalComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    DocumentRoutingModule,\r\n    FileInputModule,\r\n    WavesModule,\r\n    ButtonsModule,\r\n    CollapseModule,\r\n    ModalModule,\r\n    InputsModule,\r\n    DropdownModule,\r\n    PopoverModule\r\n  ],\r\n  exports: [\r\n    DocumentListComponent\r\n  ],\r\n  schemas: [NO_ERRORS_SCHEMA],\r\n  providers: [MDBSpinningPreloader]\r\n})\r\nexport class DocumentModule { }\r\n","export class Document {\r\n    fileName: string;\r\n    created: string;\r\n    id: number;\r\n    lastModified: string;\r\n    ownerId: number;\r\n    path: string;\r\n    group: string;\r\n}\r\n"],"sourceRoot":""}