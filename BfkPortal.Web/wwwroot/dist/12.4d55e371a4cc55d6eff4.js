(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{MuPt:function(l,n,t){"use strict";t.r(n);var e=t("CcnG"),u=function(){return function(){}}(),o=t("pMnS"),i=function(){function l(){}return l.prototype.ngOnInit=function(){},l}(),r=e.ob({encapsulation:0,styles:[[""]],data:{}});function s(l){return e.Kb(0,[(l()(),e.qb(0,0,null,null,2,"div",[["class","divider-new"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Pr\xe4ferenzen"])),(l()(),e.qb(3,0,null,null,0,"div",[["class","card"]],null,null,null,null,null))],null,null)}var p=t("Ip0R"),a=t("h8TB"),c=function(){function l(l){this.sessionUser=l,this.profile=this.sessionUser.getUser()}return l.prototype.ngOnInit=function(){},l}(),m=e.ob({encapsulation:0,styles:[[""]],data:{}});function h(l){return e.Kb(0,[(l()(),e.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"div",[["class","chip float-right"]],null,null,null,null,null)),(l()(),e.Ib(2,null,["",""]))],null,function(l,n){l(n,2,0,n.context.$implicit.name)})}function b(l){return e.Kb(0,[(l()(),e.qb(0,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"div",[["class","chip float-right"]],null,null,null,null,null)),(l()(),e.Ib(2,null,["",""]))],null,function(l,n){l(n,2,0,n.context.$implicit)})}function y(l){return e.Kb(0,[(l()(),e.qb(0,0,null,null,2,"div",[["class","divider-new"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Profil"])),(l()(),e.qb(3,0,null,null,33,"div",[["class","card"]],null,null,null,null,null)),(l()(),e.qb(4,0,null,null,32,"div",[["class","list-group-flush"]],null,null,null,null,null)),(l()(),e.qb(5,0,null,null,4,"div",[["class","list-group-item d-flex justify-content-between"]],null,null,null,null,null)),(l()(),e.qb(6,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Vorname"])),(l()(),e.qb(8,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Ib(9,null,["",""])),(l()(),e.qb(10,0,null,null,4,"div",[["class","list-group-item d-flex justify-content-between"]],null,null,null,null,null)),(l()(),e.qb(11,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Nachname"])),(l()(),e.qb(13,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Ib(14,null,["",""])),(l()(),e.qb(15,0,null,null,4,"div",[["class","list-group-item d-flex justify-content-between"]],null,null,null,null,null)),(l()(),e.qb(16,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["E-Mail"])),(l()(),e.qb(18,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Ib(19,null,["",""])),(l()(),e.qb(20,0,null,null,4,"div",[["class","list-group-item d-flex justify-content-between"]],null,null,null,null,null)),(l()(),e.qb(21,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Telefonnummer"])),(l()(),e.qb(23,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Ib(24,null,["",""])),(l()(),e.qb(25,0,null,null,5,"div",[["class","list-group-item d-flex justify-content-between"]],null,null,null,null,null)),(l()(),e.qb(26,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Organisationen"])),(l()(),e.qb(28,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,h)),e.pb(30,278528,null,0,p.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null),(l()(),e.qb(31,0,null,null,5,"div",[["class","list-group-item d-flex justify-content-between"]],null,null,null,null,null)),(l()(),e.qb(32,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Rollen"])),(l()(),e.qb(34,0,null,null,2,"div",[],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,b)),e.pb(36,278528,null,0,p.k,[e.O,e.L,e.s],{ngForOf:[0,"ngForOf"]},null)],function(l,n){var t=n.component;l(n,30,0,t.profile.memberships),l(n,36,0,t.profile.entitlements)},function(l,n){var t=n.component;l(n,9,0,t.profile.firstname),l(n,14,0,t.profile.lastname),l(n,19,0,t.profile.email),l(n,24,0,t.profile.telephone)})}var f=t("i0AA"),d=function(){return function(){this.months=[],this.counter=[]}}(),v=t("LvDl"),g=t("wd/R"),C=function(){return function(){this.types=[],this.counter=[],this.colors=[]}}(),T=function(){function l(){this.myAppointments=new d,this.myAppointmentsPerType=new C,this.appointmentRatio=[],this.appointmentsPerMonthDataSet=[],this.appointmentsPerMonthLabels=[],this.appointmentsPerMonthType="line",this.appointmentsPerTypeType="bar",this.appointmentsPerTypeDataSet=[],this.appointmentsPerTypeLabels=[],this.appointmentsPerTypeColors=[],this.appointmentRatioType="pie",this.appointmentsRatioDataSet=[],this.appointmentRatioLabels=["Alle Termine","Teilgenommene Termine"],this.appointmentRatioColors=[{backgroundColor:["#F7464A","#46BFBD"],hoverBackgroundColor:["#FF5A5E","#5AD3D1"],borderWidth:2}],this.now=new Date,this.appointmentPerMOnthHasEntries=!1,this.appointmentPerTypeHasEntries=!1,this.appointmentsPerMonthColors=[{backgroundColor:"rgba(105, 0, 132, .2)",borderColor:"rgba(200, 99, 132, .7)",borderWidth:2}],this.chartOptions={responsive:!0}}return l.prototype.ngOnInit=function(){},l.prototype.ngOnChanges=function(l){if(console.log(l),l.myAppointments){console.log(l.myAppointments.currentValue),this.myAppointments=l.myAppointments.currentValue,console.log(this.myAppointments),this.appointmentPerMOnthHasEntries=v.some(this.myAppointments.counter,function(l){return l>0});var n=[{data:this.myAppointments.counter,label:"Termine pro Monat("+g(Date.now()).format("YYYY")+")"}];this.appointmentsPerMonthDataSet=n,this.appointmentsPerMonthLabels=this.myAppointments.months}if(l.myAppointmentsCounter&&(this.myAppointmentsCounter=l.myAppointmentsCounter.currentValue),l.myShiftsCounter&&(this.myShiftsCounter=l.myShiftsCounter.currentValue),l.appointmentRatio&&(console.log(l.appointmentRatio.currentValue),this.appointmentRatio=l.appointmentRatio.currentValue,this.appointmentsRatioDataSet=[{data:this.appointmentRatio}],console.log(this.appointmentsRatioDataSet)),l.myAppointmentsPerType){this.myAppointmentsPerType=l.myAppointmentsPerType.currentValue,console.log(this.myAppointmentsPerType),this.appointmentPerTypeHasEntries=this.myAppointmentsPerType.types.length>0;var t=[],e=[];this.myAppointmentsPerType.colors.forEach(function(l){t.push(l.backgroundColor),e.push(l.borderColor)}),this.appointmentsPerTypeColors=[{backgroundColor:t,borderColor:e,borderWidth:2}];var u=[];this.myAppointmentsPerType.counter.forEach(function(l){u.push(l.value)}),console.log(this.appointmentsPerTypeColors),this.appointmentsPerTypeDataSet=[{data:u}],this.appointmentsPerTypeLabels=this.myAppointmentsPerType.types,console.log(this.appointmentsPerTypeLabels)}},l.prototype.chartClicked=function(l){},l.prototype.chartHovered=function(l){},l}(),A=e.ob({encapsulation:0,styles:[[""]],data:{}});function P(l){return e.Kb(0,[(l()(),e.qb(0,0,null,null,5,"div",[["class","list-group-item"],["style","display: block"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,2,"h5",[["class","text-center h5-responsive"]],null,null,null,null,null)),(l()(),e.Ib(2,null,["Termine pro Monat(",")"])),e.Eb(3,4),(l()(),e.qb(4,0,null,null,1,"canvas",[["mdbChart",""]],null,[[null,"chartHover"],[null,"chartClick"]],function(l,n,t){var e=!0,u=l.component;return"chartHover"===n&&(e=!1!==u.chartHovered(t)&&e),"chartClick"===n&&(e=!1!==u.chartClicked(t)&&e),e},null,null)),e.pb(5,737280,null,0,f.g,[e.k,e.B],{datasets:[0,"datasets"],labels:[1,"labels"],options:[2,"options"],chartType:[3,"chartType"],colors:[4,"colors"],legend:[5,"legend"]},{chartClick:"chartClick",chartHover:"chartHover"})],function(l,n){var t=n.component;l(n,5,0,t.appointmentsPerMonthDataSet,t.appointmentsPerMonthLabels,t.chartOptions,t.appointmentsPerMonthType,t.appointmentsPerMonthColors,!1)},function(l,n){var t=n.component,u=e.Jb(n,2,0,l(n,3,0,e.Ab(n.parent,0),t.now,"yyyy","","de-AT"));l(n,2,0,u)})}function q(l){return e.Kb(0,[(l()(),e.qb(0,0,null,null,4,"div",[["class","col-md-6 col-sm-12"]],null,null,null,null,null)),(l()(),e.qb(1,0,null,null,1,"h5",[["class","text-center h5-responsive"]],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Termine pro Typ"])),(l()(),e.qb(3,0,null,null,1,"canvas",[["mdbChart",""]],null,[[null,"chartHover"],[null,"chartClick"]],function(l,n,t){var e=!0,u=l.component;return"chartHover"===n&&(e=!1!==u.chartHovered(t)&&e),"chartClick"===n&&(e=!1!==u.chartClicked(t)&&e),e},null,null)),e.pb(4,737280,null,0,f.g,[e.k,e.B],{datasets:[0,"datasets"],labels:[1,"labels"],options:[2,"options"],chartType:[3,"chartType"],colors:[4,"colors"],legend:[5,"legend"]},{chartClick:"chartClick",chartHover:"chartHover"})],function(l,n){var t=n.component;l(n,4,0,t.appointmentsPerTypeDataSet,t.appointmentsPerTypeLabels,t.chartOptions,t.appointmentsPerTypeType,t.appointmentsPerTypeColors,!1)},null)}function w(l){return e.Kb(0,[e.Cb(0,p.e,[e.u]),(l()(),e.qb(1,0,null,null,2,"div",[["class","divider-new"]],null,null,null,null,null)),(l()(),e.qb(2,0,null,null,1,"h3",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Statistiken"])),(l()(),e.qb(4,0,null,null,21,"div",[["class","card"]],null,null,null,null,null)),(l()(),e.qb(5,0,null,null,10,"div",[["class","list-group-flush"]],null,null,null,null,null)),(l()(),e.qb(6,0,null,null,4,"div",[["class","list-group-item d-flex justify-content-between"]],null,null,null,null,null)),(l()(),e.qb(7,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Erledigte Dienste"])),(l()(),e.qb(9,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Ib(10,null,["",""])),(l()(),e.qb(11,0,null,null,4,"div",[["class","list-group-item d-flex justify-content-between"]],null,null,null,null,null)),(l()(),e.qb(12,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Ib(-1,null,["Erledigte Termine"])),(l()(),e.qb(14,0,null,null,1,"div",[],null,null,null,null,null)),(l()(),e.Ib(15,null,["",""])),(l()(),e.hb(16777216,null,null,1,null,P)),e.pb(17,16384,null,0,p.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(18,0,null,null,7,"div",[["class","row pt-2"]],null,null,null,null,null)),(l()(),e.hb(16777216,null,null,1,null,q)),e.pb(20,16384,null,0,p.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(21,0,null,null,4,"div",[["class","col-md-6 col-sm-12"]],null,null,null,null,null)),(l()(),e.qb(22,0,null,null,1,"h5",[["class","text-center h5-responsive"]],null,null,null,null,null)),(l()(),e.Ib(-1,null,["teilgenommene Termine/alle Termine"])),(l()(),e.qb(24,0,null,null,1,"canvas",[["mdbChart",""]],null,[[null,"chartHover"],[null,"chartClick"]],function(l,n,t){var e=!0,u=l.component;return"chartHover"===n&&(e=!1!==u.chartHovered(t)&&e),"chartClick"===n&&(e=!1!==u.chartClicked(t)&&e),e},null,null)),e.pb(25,737280,null,0,f.g,[e.k,e.B],{datasets:[0,"datasets"],labels:[1,"labels"],options:[2,"options"],chartType:[3,"chartType"],colors:[4,"colors"],legend:[5,"legend"]},{chartClick:"chartClick",chartHover:"chartHover"})],function(l,n){var t=n.component;l(n,17,0,t.appointmentPerMOnthHasEntries),l(n,20,0,t.appointmentPerTypeHasEntries),l(n,25,0,t.appointmentsRatioDataSet,t.appointmentRatioLabels,t.chartOptions,t.appointmentRatioType,t.appointmentRatioColors,!0)},function(l,n){var t=n.component;l(n,10,0,t.myShiftsCounter),l(n,15,0,t.myAppointmentsCounter)})}var I=t("K52H"),k=t("RHqu"),O=t("3Owf"),S=t("UkzC"),D=function(){function l(l,n,t,e){this.navbarButtons=l,this.rolesService=n,this.appointmentService=t,this.sessionUser=e,this.myAppointments=new d,this.myAppointmentsPerType=new C,this.myAppointmentsCounter=0,this.myShiftsCounter=0,this.appointmentRatio=[],this.profile=this.sessionUser.getUser()}return l.prototype.ngOnInit=function(){var l=this;this.navbarButtons.noSidebarMenu(),this._allAppointmentsSubscription=this.appointmentService._allAppointments.subscribe(function(n){l.appointmentRatio=[],l.appointmentRatio.push(n.filter(function(l){return l.type!==S.a[S.a.FreierDienst]&&g(l.from.getFullYear()).isSame(2019,"years")}).length);var t=n.filter(function(n){if(n.type!==S.a[S.a.FreierDienst]&&g(n.from.getFullYear()).isSame(2019,"years"))if(n.areParticipantsOrganisations){if(l.checkForParticipationInOrg(n))return n}else if(n.participations.includes(function(n){return n.email===l.profile.email})||n.owner.email===l.profile.email)return n});l.appointmentRatio.push(t.length),l.getAppointmentsPerType(t),l.myAppointmentsCounter=t.filter(function(l){return l.to.getTime()<Date.now()&&l.type===S.a[S.a.Vollversammlung]}).length,l.myShiftsCounter=t.filter(function(l){return l.to.getTime()<Date.now()&&l.type!==S.a[S.a.FreierDienst]&&S.a[S.a.Vollversammlung]}).length;var e=v.groupBy(t,function(l){return g(l.from).format("MMMM")}),u=g.months(),o=new d;u.forEach(function(l){e.hasOwnProperty(l)?(o.counter.push(e[l].length),o.months.push(l)):(o.counter.push(0),o.months.push(l))}),l.myAppointments=o})},l.prototype.checkForParticipationInOrg=function(l){for(var n=0,t=l.participations;n<t.length;n++)for(var e=t[n],u=0,o=this.sessionUser.getUser().memberships;u<o.length;u++)if(v.isEqual(e,o[u]))return!0;return!1},l.prototype.getAppointmentsPerType=function(l){var n=this,t=new C;l.forEach(function(l){l.type===S.a[S.a.VormittagsDienst]?n.addCounterOfAppointmentsPerType(t,l,"#ad2121","#FAE3E3"):l.type===S.a[S.a.Vollversammlung]?n.addCounterOfAppointmentsPerType(t,l,"#e3bc08","#FDF1BA"):l.type===S.a[S.a.NachmittagsDienst]?n.addCounterOfAppointmentsPerType(t,l,"#607d8b","#607d8b"):l.type===S.a[S.a.NachtDienst]?n.addCounterOfAppointmentsPerType(t,l,"#1e90ff","#D1E8FF"):l.type===S.a[S.a.MarktplatzDienst]&&n.addCounterOfAppointmentsPerType(t,l,"#4caf50","#99e599")}),this.myAppointmentsPerType=t,console.log(this.myAppointmentsPerType)},l.prototype.addCounterOfAppointmentsPerType=function(l,n,t,e){l.counter.some(function(l){return l.type===n.type})?l.counter[n.type].value++:(l.colors.push({borderColor:t,backgroundColor:e}),l.counter.push({type:n.type,value:1}),l.types.push(n.type))},l.prototype.ngOnDestroy=function(){this._allAppointmentsSubscription.unsubscribe()},l}(),R=e.ob({encapsulation:0,styles:[[""]],data:{}});function M(l){return e.Kb(0,[(l()(),e.qb(0,0,null,null,1,"app-profile-preferences",[],null,null,null,s,r)),e.pb(1,114688,null,0,i,[],null,null)],function(l,n){l(n,1,0)},null)}function H(l){return e.Kb(0,[(l()(),e.qb(0,0,null,null,1,"app-profile-information",[],null,null,null,y,m)),e.pb(1,114688,null,0,c,[a.a],null,null),(l()(),e.hb(16777216,null,null,1,null,M)),e.pb(3,16384,null,0,p.l,[e.O,e.L],{ngIf:[0,"ngIf"]},null),(l()(),e.qb(4,0,null,null,1,"app-profile-stats",[],null,null,null,w,A)),e.pb(5,638976,null,0,T,[],{myAppointments:[0,"myAppointments"],myAppointmentsPerType:[1,"myAppointmentsPerType"],myAppointmentsCounter:[2,"myAppointmentsCounter"],myShiftsCounter:[3,"myShiftsCounter"],appointmentRatio:[4,"appointmentRatio"]},null)],function(l,n){var t=n.component;l(n,1,0),l(n,3,0,t.rolesService.isAdminBwst||t.rolesService.isUserBwst),l(n,5,0,t.myAppointments,t.myAppointmentsPerType,t.myAppointmentsCounter,t.myShiftsCounter,t.appointmentRatio)},null)}function F(l){return e.Kb(0,[(l()(),e.qb(0,0,null,null,1,"app-profile-wrapper",[],null,null,null,H,R)),e.pb(1,245760,null,0,D,[I.a,k.a,O.a,a.a],null,null)],function(l,n){l(n,1,0)},null)}var x=e.mb("app-profile-wrapper",D,F,{},{},[]),E=t("gIcY"),L=t("ZYCi"),B=function(){return function(){}}();t.d(n,"ProfileModuleNgFactory",function(){return V});var V=e.nb(u,[],function(l){return e.xb([e.yb(512,e.j,e.bb,[[8,[o.a,x]],[3,e.j],e.x]),e.yb(4608,p.n,p.m,[e.u,[2,p.z]]),e.yb(4608,E.x,E.x,[]),e.yb(1073742336,p.c,p.c,[]),e.yb(1073742336,L.p,L.p,[[2,L.v],[2,L.n]]),e.yb(1073742336,B,B,[]),e.yb(1073742336,f.n,f.n,[]),e.yb(1073742336,f.Jc,f.Jc,[]),e.yb(1073742336,f.q,f.q,[]),e.yb(1073742336,E.t,E.t,[]),e.yb(1073742336,E.h,E.h,[]),e.yb(1073742336,f.cb,f.cb,[]),e.yb(1073742336,f.x,f.x,[]),e.yb(1073742336,f.w,f.w,[]),e.yb(1073742336,u,u,[]),e.yb(1024,L.l,function(){return[[{path:"",component:D}]]},[])])})}}]);